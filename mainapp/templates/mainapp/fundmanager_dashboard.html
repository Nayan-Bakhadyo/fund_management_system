{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Fund Manager Dashboard</title>
    <link rel="stylesheet" href="{% static 'mainapp/style.css' %}">
    <link rel="stylesheet" href="{% static 'mainapp/fundmanager_dashboard.css' %}">
    <link rel="icon" type="image/png" href="{% static 'mainapp/assets/BE_logo.png' %}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="{% static 'mainapp/fundmanager_dashboard.js' %}" defer></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="dashboard-container">
        <nav class="sidebar" id="sidebar">
            <button class="sidebar-toggle" id="sidebarToggle">&#9776;</button>
            <h3>Fund Manager</h3>
            <ul class="sidebar-menu">
                <li class="nav-item">
            <a href="#" class="nav-link" id="firmStatusMenu">
                <i class="bi bi-bar-chart"></i> Firm's Status
            </a>
            </li>
                <li>
                    <a href="#" id="addTransactionLink">
                        Add Transaction
                    </a>
                </li>
                <li>
                    <a href="#" id="viewTransactionsLink">
                        View Transactions
                    </a>
                </li>
                <li>
                    <a href="#" id="viewUserDashboardLink">
                        User Dashboard
                    </a>
                </li>
                <li>
                    <a href="#" id="addInvestmentLink">Add Investment</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" id="addInvestmentTransactionLink">Add Investment Transaction</a>
                </li>
                <li>
                    <a href="#" id="closeInvestmentLink">Close Investment</a>
                </li>
            </ul>
            <!-- Add more sidebar options here -->
        </nav>
        <header class="topbar">
            <div class="user-profile">
                <img src="https://ui-avatars.com/api/?name={{ user.get_full_name|default:user.username|urlencode }}" alt="User DP" class="user-dp">
                <div class="user-info">
                    <div class="user-name">{{ user.get_full_name|default:user.username }}</div>
                    <div class="user-email">{{ user.email }}</div>
                </div>
                <a href="{% url 'logout' %}" class="logout-link">Log out</a>
            </div>
        </header>
        <main class="main-content">
            <div id="dashboard-content">
                <!-- Content will be loaded here -->
            </div>
        </main>
    </div>
    {% if messages %}
      <script>
        {% for message in messages %}
          alert("{{ message|escapejs }}");
        {% endfor %}
      </script>
    {% endif %}

    <div class="modal fade" id="firmStatusModal" tabindex="-1" aria-labelledby="firmStatusModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="firmStatusModalLabel">Firm's Status</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body" id="firm-status-dashboard">
        <!-- Dashboard content will be loaded here via AJAX -->
        <div class="text-center py-5">
          <div class="spinner-border text-success" role="status"></div>
        </div>
      </div>
    </div>
  </div>
</div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>